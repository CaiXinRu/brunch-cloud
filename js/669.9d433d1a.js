"use strict";(self["webpackChunkbrunch_cloud"]=self["webpackChunkbrunch_cloud"]||[]).push([[669],{3421:function(t,a,s){var c=s(6086),l=s(6154),i=s(7587);a["Z"]=(0,c.Q_)("cart",{state:()=>({isLoading:!1,cart:{},status:{loadingItem:""},$httpMessageState:i.Z}),getters:{},actions:{getCart(){const t="https://vue3-course-api.hexschool.io/api/brunch-cloud/cart";this.isLoading=!0,l.Z.get(t).then((t=>{console.log(t.data.data.carts.length),this.cart=t.data.data,this.isLoading=!1}))},updateCart(t){const a=`https://vue3-course-api.hexschool.io/api/brunch-cloud/cart/${t.id}`;this.status.loadingItem=t.id;const s={product_id:t.product_id,qty:t.qty};l.Z.put(a,{data:s}).then((t=>{this.status.loadingItem="",this.getCart()}))},plusCount(t){t.qty+=1,this.updateCart(t)},minusCount(t){t.qty>1?(t.qty-=1,this.updateCart(t)):1===t.qty&&this.removeCartItem(t.id)},removeCartItem(t){const a=`https://vue3-course-api.hexschool.io/api/brunch-cloud/cart/${t}`;this.isLoading=!0,l.Z["delete"](a).then((t=>{this.$httpMessageState(t,"移除購物車品項"),this.getCart(),this.isLoading=!1}))}}})},2056:function(t,a,s){s.d(a,{Z:function(){return v}});var c=s(6252),l=s(8508);const i=t=>((0,c.dD)("data-v-1e343382"),t=t(),(0,c.Cn)(),t),o={class:"loading-bg"},d=i((()=>(0,c._)("img",{src:l,alt:"Loading..."},null,-1))),e=[d];function n(t,a){return(0,c.wg)(),(0,c.iD)("div",o,e)}var r=s(3744);const u={},h=(0,r.Z)(u,[["render",n],["__scopeId","data-v-1e343382"]]);var v=h},5669:function(t,a,s){s.r(a),s.d(a,{default:function(){return zt}});var c=s(6252),l=s(3577),i=s(9963);const o=t=>((0,c.dD)("data-v-6dbfb8ca"),t=t(),(0,c.Cn)(),t),d={class:"bg-color--white"},e={class:"container u-pt-48 u-pb-48"},n=(0,c.uE)('<div class="co-stepbar" data-v-6dbfb8ca><div class="co-step" data-v-6dbfb8ca><div class="cs-num" data-v-6dbfb8ca>1</div><div class="cs-text" data-v-6dbfb8ca>購物訂單</div><div class="cs-bar" data-v-6dbfb8ca></div></div><div class="co-step" data-v-6dbfb8ca><div class="cs-num cs-lighter" data-v-6dbfb8ca>2</div><div class="cs-text" data-v-6dbfb8ca>填寫資料</div><div class="cs-bar cs-lighter" data-v-6dbfb8ca></div></div><div class="co-step" data-v-6dbfb8ca><div class="cs-num cs-lighter" data-v-6dbfb8ca>3</div><div class="cs-text" data-v-6dbfb8ca>確認訂單</div><div class="cs-bar cs-lighter" data-v-6dbfb8ca></div></div><div class="co-step" data-v-6dbfb8ca><div class="cs-num cs-lighter" data-v-6dbfb8ca>4</div><div class="cs-text" data-v-6dbfb8ca>完成付款</div><div class="cs-bar cs-lighter" data-v-6dbfb8ca></div></div><div class="co-step-sm" data-v-6dbfb8ca><div class="cs-num" data-v-6dbfb8ca>1</div><div class="cs-text" data-v-6dbfb8ca>購物訂單</div><div class="cs-bar" data-v-6dbfb8ca></div></div></div>',1),r={style:{width:"100%"},class:"cl-table"},u=o((()=>(0,c._)("thead",null,[(0,c._)("tr",{class:"cl-head"},[(0,c._)("th",{style:{width:"25%"}},"品名"),(0,c._)("th",{style:{width:"20%"}},"單價"),(0,c._)("th",{style:{width:"25%"}},"數量"),(0,c._)("th",{style:{width:"20%"}},"小計"),(0,c._)("th",{style:{width:"10%"}})])],-1))),h={key:0},v={style:{width:"25%"}},b={key:0,class:"color--positive"},p={style:{width:"20%"}},_={key:0},y=o((()=>(0,c._)("span",{class:"color--positive"},"下殺折扣價：",-1))),g={key:1},w={style:{width:"25%"},class:"cl-number"},k={class:"u-ml-48 u-mr-48 cl-count-num"},f={style:{width:"20%"}},m={key:0},C=o((()=>(0,c._)("span",{class:"color--positive"},"下殺折扣價：",-1))),D={key:1},q={style:{width:"10%"}},$=["onClick"],x={key:1},z={class:"color--dark-brown cl-nbody"},I=o((()=>(0,c._)("div",null,"您尚未選取任何餐點喔！",-1))),W={style:{width:"100%"},class:"cl-table-md"},L=o((()=>(0,c._)("thead",null,[(0,c._)("tr",{class:"cl-head"},[(0,c._)("th",{style:{width:"25%"}},"品名"),(0,c._)("th",{style:{width:"20%"}},"單價"),(0,c._)("th",{style:{width:"30%"}},"數量"),(0,c._)("th",{style:{width:"20%"}},"小計"),(0,c._)("th",{style:{width:"5%"}})])],-1))),U={key:0},N={style:{width:"25%"}},T={key:0,class:"color--positive"},Z={style:{width:"20%"}},M={key:0},H=o((()=>(0,c._)("span",{class:"color--positive"},"下殺折扣價：",-1))),Y={key:1},K={style:{width:"30%"},class:"cl-number"},S={class:"cl-count-num"},j={style:{width:"20%"}},B={key:0},E=o((()=>(0,c._)("span",{class:"color--positive"},"下殺折扣價：",-1))),Q={key:1},V={style:{width:"5%"}},A=["onClick"],F={key:1},G={class:"color--dark-brown cl-nbody"},J=o((()=>(0,c._)("div",null,"您尚未選取任何餐點喔！",-1))),O={style:{width:"100%"},class:"cl-table-sm"},P=o((()=>(0,c._)("thead",null,[(0,c._)("tr",{class:"cl-head"},[(0,c._)("th",{style:{width:"35%"}},"數量"),(0,c._)("th",{style:{width:"55%"}},"訂單內容"),(0,c._)("th",{style:{width:"10%"}})])],-1))),R={key:0},X={style:{width:"35%"},class:"cl-number"},tt={class:"cl-count-num"},at={style:{width:"55%"}},st={key:0,class:"color--positive"},ct={key:1},lt=o((()=>(0,c._)("span",{class:"color--positive"},"下殺折扣價：",-1))),it={key:2,class:"cl-total-sm"},ot={style:{width:"10%"}},dt=["onClick"],et={key:1},nt={class:"color--dark-brown cl-nbody"},rt=o((()=>(0,c._)("div",null,"您尚未選取任何餐點喔！",-1))),ut={key:0,class:"cl-bottom"},ht={class:"clc-input"},vt={class:"clc-btn-sm"},bt={class:"cl-total"},pt=o((()=>(0,c._)("td",{class:"cl-toal-text"},"總價",-1))),_t={class:"cl-total-num"},yt={key:0,class:"cl-total"},gt=o((()=>(0,c._)("td",{class:"cl-toal-text color--positive"},"下殺折扣價",-1))),wt={class:"cl-total-num color--positive"},kt={style:{width:"100%"}};function ft(t,a,s,o,ft,mt){const Ct=(0,c.up)("Lodingpage"),Dt=(0,c.up)("font-awesome-icon"),qt=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[t.isLoading?((0,c.wg)(),(0,c.j4)(Ct,{key:0})):(0,c.kq)("",!0),(0,c._)("div",d,[(0,c._)("div",e,[n,(0,c._)("table",r,[u,t.cart?.carts?.length?((0,c.wg)(),(0,c.iD)("tbody",h,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(t.cart.carts,(a=>((0,c.wg)(),(0,c.iD)("tr",{style:{height:"100px"},class:"color--dark-brown cl-body",key:a.id},[(0,c._)("td",v,[(0,c.Uk)((0,l.zw)(a.product.title)+" ",1),a.coupon?((0,c.wg)(),(0,c.iD)("div",b," （已套用優惠券） ")):(0,c.kq)("",!0)]),(0,c._)("td",p,[a.coupon?((0,c.wg)(),(0,c.iD)("div",_,[y,(0,c.Uk)("NT$"+(0,l.zw)(a.coupon.percent*a.product.price/100),1)])):((0,c.wg)(),(0,c.iD)("div",g,"特價 NT$"+(0,l.zw)(a.product.price),1))]),(0,c._)("td",w,[(0,c._)("div",null,[(0,c.Wm)(Dt,{icon:"fa-regular fa-square-minus",class:(0,l.C_)([{disabled:t.status.loadingItem===a.id},"cl-count"]),onClick:s=>t.minusCount(a)},null,8,["class","onClick"])]),(0,c._)("div",k,(0,l.zw)(a.qty),1),(0,c._)("div",null,[(0,c.Wm)(Dt,{icon:"fa-regular fa-square-plus",class:(0,l.C_)([{disabled:t.status.loadingItem===a.id},"cl-count"]),onClick:s=>t.plusCount(a)},null,8,["class","onClick"])])]),(0,c._)("td",f,[a.final_total!==a.total?((0,c.wg)(),(0,c.iD)("div",m,[C,(0,c.Uk)("NT$"+(0,l.zw)(t.$filters.currency(a.final_total)),1)])):((0,c.wg)(),(0,c.iD)("div",D,"NT$"+(0,l.zw)(t.$filters.currency(a.total)),1))]),(0,c._)("td",q,[(0,c._)("button",{type:"button",class:"cl-delete",onClick:s=>t.removeCartItem(a.id)},[(0,c.Wm)(Dt,{icon:"fa-solid fa-trash-can"})],8,$)])])))),128))])):(0,c.kq)("",!0),t.cart?.carts?.length?(0,c.kq)("",!0):((0,c.wg)(),(0,c.iD)("tbody",x,[(0,c._)("tr",z,[(0,c.Wm)(Dt,{class:"color--secondary",style:{"font-size":"70px","margin-bottom":"10px"},icon:"fa-solid fa-cloud",bounce:""}),I,(0,c.Wm)(qt,{to:"/menu",class:"order-btn",onClick:t.closeModal},{default:(0,c.w5)((()=>[(0,c.Uk)("點我立即看菜單")])),_:1},8,["onClick"])])]))]),(0,c._)("table",W,[L,t.cart?.carts?.length?((0,c.wg)(),(0,c.iD)("tbody",U,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(t.cart.carts,(a=>((0,c.wg)(),(0,c.iD)("tr",{style:{height:"100px"},class:"color--dark-brown cl-body",key:a.id},[(0,c._)("td",N,[(0,c.Uk)((0,l.zw)(a.product.title)+" ",1),a.coupon?((0,c.wg)(),(0,c.iD)("div",T," （已套用優惠券） ")):(0,c.kq)("",!0)]),(0,c._)("td",Z,[a.coupon?((0,c.wg)(),(0,c.iD)("div",M,[H,(0,c.Uk)("NT$"+(0,l.zw)(a.coupon.percent*a.product.price/100),1)])):((0,c.wg)(),(0,c.iD)("div",Y,"特價 NT$"+(0,l.zw)(a.product.price),1))]),(0,c._)("td",K,[(0,c._)("div",null,[(0,c.Wm)(Dt,{icon:"fa-regular fa-square-minus",class:(0,l.C_)([{disabled:t.status.loadingItem===a.id},"cl-count"]),onClick:s=>t.minusCount(a)},null,8,["class","onClick"])]),(0,c._)("div",S,(0,l.zw)(a.qty),1),(0,c._)("div",null,[(0,c.Wm)(Dt,{icon:"fa-regular fa-square-plus",class:(0,l.C_)([{disabled:t.status.loadingItem===a.id},"cl-count"]),onClick:s=>t.plusCount(a)},null,8,["class","onClick"])])]),(0,c._)("td",j,[a.final_total!==a.total?((0,c.wg)(),(0,c.iD)("div",B,[E,(0,c.Uk)("NT$"+(0,l.zw)(t.$filters.currency(a.final_total)),1)])):((0,c.wg)(),(0,c.iD)("div",Q,"NT$"+(0,l.zw)(t.$filters.currency(a.total)),1))]),(0,c._)("td",V,[(0,c._)("button",{type:"button",class:"cl-delete",onClick:s=>t.removeCartItem(a.id)},[(0,c.Wm)(Dt,{icon:"fa-solid fa-trash-can"})],8,A)])])))),128))])):(0,c.kq)("",!0),t.cart?.carts?.length?(0,c.kq)("",!0):((0,c.wg)(),(0,c.iD)("tbody",F,[(0,c._)("tr",G,[(0,c.Wm)(Dt,{class:"color--secondary",style:{"font-size":"70px","margin-bottom":"10px"},icon:"fa-solid fa-cloud",bounce:""}),J,(0,c.Wm)(qt,{to:"/menu",class:"order-btn",onClick:t.closeModal},{default:(0,c.w5)((()=>[(0,c.Uk)("點我立即看菜單")])),_:1},8,["onClick"])])]))]),(0,c._)("table",O,[P,t.cart?.carts?.length?((0,c.wg)(),(0,c.iD)("tbody",R,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(t.cart.carts,(a=>((0,c.wg)(),(0,c.iD)("tr",{style:{height:"100px"},class:"color--dark-brown cl-body",key:a.id},[(0,c._)("td",X,[(0,c._)("div",null,[(0,c.Wm)(Dt,{icon:"fa-regular fa-square-minus",class:(0,l.C_)([{disabled:t.status.loadingItem===a.id},"cl-count"]),onClick:s=>t.minusCount(a)},null,8,["class","onClick"])]),(0,c._)("div",tt,(0,l.zw)(a.qty),1),(0,c._)("div",null,[(0,c.Wm)(Dt,{icon:"fa-regular fa-square-plus",class:(0,l.C_)([{disabled:t.status.loadingItem===a.id},"cl-count"]),onClick:s=>t.plusCount(a)},null,8,["class","onClick"])])]),(0,c._)("td",at,[(0,c.Uk)((0,l.zw)(a.product.title)+" ",1),a.coupon?((0,c.wg)(),(0,c.iD)("div",st," （已套用優惠券） ")):(0,c.kq)("",!0),a.final_total!==a.total?((0,c.wg)(),(0,c.iD)("div",ct,[lt,(0,c.Uk)("NT$"+(0,l.zw)(t.$filters.currency(a.final_total)),1)])):((0,c.wg)(),(0,c.iD)("div",it," 小計NT$"+(0,l.zw)(t.$filters.currency(a.total)),1))]),(0,c._)("td",ot,[(0,c._)("div",{class:"cl-delete",onClick:s=>t.removeCartItem(a.id)},[(0,c.Wm)(Dt,{icon:"fa-solid fa-trash-can"})],8,dt)])])))),128))])):(0,c.kq)("",!0),t.cart?.carts?.length?(0,c.kq)("",!0):((0,c.wg)(),(0,c.iD)("tbody",et,[(0,c._)("tr",nt,[(0,c.Wm)(Dt,{class:"color--secondary",style:{"font-size":"70px","margin-bottom":"10px"},icon:"fa-solid fa-cloud",bounce:""}),rt,(0,c.Wm)(qt,{to:"/menu",class:"order-btn",onClick:t.closeModal},{default:(0,c.w5)((()=>[(0,c.Uk)("點我立即看菜單")])),_:1},8,["onClick"])])]))]),t.cart?.carts?.length?((0,c.wg)(),(0,c.iD)("div",ut,[(0,c._)("table",null,[(0,c._)("tr",null,[(0,c._)("td",ht,[(0,c.wy)((0,c._)("input",{autocomplete:"off",type:"text",name:"coupon",placeholder:"請輸入優惠碼...","onUpdate:modelValue":a[0]||(a[0]=a=>t.coupon_code=a)},null,512),[[i.nr,t.coupon_code]])]),(0,c._)("td",vt,[(0,c._)("button",{class:"clc-btn",type:"button",onClick:a[1]||(a[1]=(...t)=>mt.addCouponCode&&mt.addCouponCode(...t))}," 套用優惠碼 ")])]),(0,c._)("tr",bt,[pt,(0,c._)("td",_t,"NT$"+(0,l.zw)(t.$filters.currency(t.cart.total)),1)]),t.cart.final_total!==t.cart.total?((0,c.wg)(),(0,c.iD)("tr",yt,[gt,(0,c._)("td",wt," NT$"+(0,l.zw)(t.$filters.currency(Math.floor(t.cart.final_total))),1)])):(0,c.kq)("",!0),(0,c._)("tr",null,[(0,c._)("td",kt,[(0,c.Wm)(qt,{to:"/checkinfo",class:"cl-checkBtn",type:"submit",onClick:mt.clearCheckList},{default:(0,c.w5)((()=>[(0,c.Uk)("送出訂單")])),_:1},8,["onClick"])])])])])):(0,c.kq)("",!0)])])],64)}var mt=s(2056),Ct=s(6086),Dt=s(3421),qt={data:()=>({coupon_code:""}),components:{Lodingpage:mt.Z},computed:{...(0,Ct.rn)(Dt.Z,["isLoading","cart","status"])},methods:{...(0,Ct.nv)(Dt.Z,["getCart","updateCart","removeCartItem","plusCount","minusCount"]),addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/brunch-cloud/coupon",a={code:this.coupon_code};this.isLoading=!0,this.$http.post(t,{data:a}).then((t=>{this.$httpMessageState(t,"加入優惠券"),this.coupon_code="",this.getCart(),this.isLoading=!1}))},clearCheckList(){this.cart=""}},created(){this.getCart()}},$t=s(3744);const xt=(0,$t.Z)(qt,[["render",ft],["__scopeId","data-v-6dbfb8ca"]]);var zt=xt},8508:function(t,a,s){t.exports=s.p+"img/cloud.bc85b219.gif"}}]);
//# sourceMappingURL=669.9d433d1a.js.map